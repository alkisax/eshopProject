# backend
- **security issue:** if a user is logged in passes middleware. can access sensitive info of others? Î˜Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï†Ï„Î¹Î±Ï‡Ï„Î¿ÏÎ½ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ endpoints Î³Î¹Î± Ï„Î¿Î½ guest Ï€Î¿Ï… Î½Î± ÎºÎ¬Î½Î¿Ï…Î½ Ï„Î·Î½ Î¯Î´Î¹Î± Î´Î¿Ï…Î»ÎµÎ¹Î¬ Î±Î»Î»Î± Î½Î± Î¼Î·Î½ Î­Ï‡Î¿Ï…Î½ verification middliware
- problems in github login
- delete only one comment âœ…
- bind participant to user âœ…
- transfer email message to .env âœ…
- cart total price âŒ will not do. as front can do i by it self
- swagger fro participant find by id/email âœ…
- remove middleware from cart. guests need cart âœ…
- /cart/clean-junk âœ… clear old transactionsâœ…(5 years) /participant/clear âœ…(longer than lastupdated a week)
- stripe paypal and gpay (said its on stripe dashboard) âœ…
- stripe webhooks âœ…
- multer upload âœ…
- appwrite image bucket âœ…
- clear junk endpointâœ…
- add logger to save to file after stripe success âœ…
- participants must have shipping address end email / users must have shipping address âœ… implemented by adding shipping info to transaction
- (what happens to deleted commodity images?)
- webhook swagger and tests âœ…
- new category schema with supercategory, and allow parent category with arr of categories as child. Also some categories to have an atribute of "tag" âœ…
- comment crud âœ…
- fix email âœ…
- chat gpt profanity comment test. if not pass wait for admin aproval âœ…
- cosline similarity commodity search

- create a security risks checklist

# frontend
- minimal shop âœ…
- minimal cart page âœ… 
- checkout âœ…
- right sidebar in store if cart with edit quantities âœ…
- left sidebar in store with criteria and search âœ…
- Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½ÎµÏ‚ Î±Î³Î¿ÏÎµÏ‚ âœ…
- crud ÎµÎ¼Ï€Î¿ÏÎµÏ…Î¼Î±Ï„Ï‰Î½ ÎºÎ±Î¹ transaction - admin pannel âœ…
- add create commodity to admin panel â†’ commodity tab âœ…
- add image to commodity admin panel â†’ commodity tab â†’ edit âœ…
- Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´ÏÏƒÎµÎ¹ Ï…Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÎ± Mail Î¿ guest Î³Î¹Î± Î½Î± Ï„Î¿Ï… Î­ÏÎ¸ÎµÎ¹ Ï„Î¿ confirmation âœ…
- Ï€ÏŒÏƒÎ± Î­Ï‡Î¿Ï…Î½ Ï€Î¿Ï…Î»Î·Î¸ÎµÎ¯ ÏƒÏ„Î¿ admin pannel commodities âœ…
- notes in shipping unresponcive âœ…
- if no commodity image show sth âœ…
- bugs in search categories âœ…
- GAnalytics now tracks commodity impretions and commodity pages âœ…, learn dashboard
- chat gpt criteria optimiser âœ…
- Î±Î³Î±Ï€Î·Î¼Î­Î½Î± Ï€ÏÎ¿Î¹ÏŒÎ½Ï„Î± â¤ï¸
- Ï„Î± Î­Î¾Î¿Î´Î± Î±Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚ Î½Î± Ï€ÏÎ¿ÏƒÏ„Î®Î¸ÎµÎ½Ï„Îµ (Ï‰Ï‚ invisible commodities)

- ## e2e test

# security  

### âš ï¸ Still important to consider
- ğŸš¨ Replace localStorage with httpOnly cookies â†’ biggest gain.
- ğŸš¨ Avoid tokens in query params on OAuth success â†’ fix Google/GitHub flow.

### ğŸ” Frontend â€“ already done

- DOMPurify for blog/Editor.js rendering
- React auto-escaping for plain text (comments, commodity descriptions)
- Frontend validators (password, email, postal, phone) aligned with backend
- No raw dangerouslySetInnerHTML except sanitized renderer
- Google Maps iframe hardcoded, not user-provided
- Role-based protected routes (PrivateRoute, AdminPrivateRoute)

### âš™ï¸ Backend â€“ already done

- Winston logger
- CORS with allow-list
- Helmet with CSP
- Zod input validation
- Role-based access control
- Healthcheck API endpoint
- Rate limiter (global + login brute-force)
- Automated tests in GitHub Actions
- DAO pattern for DB access
- Environment variables for secrets
- Upload size restriction
- JWT authentication, passwords hashed (never stored plain)
- npm audit for dependency vulnerabilities

# notes
### Render setup
Root Directory: leave blank (since backend + frontend are in root).
Build Command:
`cd frontend && npm install && npm run build && cd ../backend && npm install && npm run build`
Start Command:
`cd backend && npm start`

test success stripe
`http://localhost:5173/checkout-success?session_id=cs_live_a1PBF9KvFU5WOiYAIA6FyI3zpQfRDR54C1VO7OJTBax1YfytAyK2bygMFj`

âœ… Backend Security (Node + Express + Mongo)

 Auth & Tokens â†’ JWT secret in env, verify middleware, role-based access âœ…
 Password security â†’ bcrypt, strong policy with Zod âœ…
 Rate limiting â†’ express-rate-limit global âœ…
 Input validation â†’ Zod everywhere âœ…
 NoSQL injection â†’ Mongoose schemas âœ…
 CORS & Headers â†’ cors with allow-list, helmet âœ…
 Error handling â†’ no centralized error handler yet (stack traces may leak) âš ï¸
 Payments â†’ Stripe Checkout + webhook âœ… (server verifies, prices trusted from dashboard)
 Database hardening â†’ not shown (least privilege, TLS, backups) âš ï¸

âœ… Frontend Security (React)

 Auth â†’ still storing tokens in localStorage âš ï¸ (httpOnly cookies recommended)
 Forms & Inputs â†’ DOMPurify on blog posts âœ…; comments plain text âœ…
 Sensitive data â†’ API keys hidden, only env URLs exposed âœ…
 Dependencies â†’ npm auditâœ…

âœ… Infra & Deployment

 Environment variables â†’ using .env, not committed âœ…
 HTTPS â†’ not shown; must be enforced in production âš ï¸
 Server hardening â†’ not shown (run as non-root, PM2/Docker) âš ï¸
 CI/CD â†’ GitHub Actions in use, secrets stored in repo settings âœ…
 Logging & Monitoring â†’ Winston partially

âœ… Legal / Compliance

 GDPR â†’ partial (account deletion exists, but no cookie consent / privacy pages) âš ï¸
 Payments â†’ Stripe only, no card storage âœ…
 Privacy Policy / Terms â†’ not implemented yet âš ï¸

âš¡ Biggest remaining gaps (high severity & easy-ish to fix):

Tokens in localStorage â†’ move to httpOnly cookies.
Error handling â†’ centralize error middleware, hide stack traces.
CSP â†’ tighten imgSrc (currently allows any https image).
HTTPS enforcement.
Privacy Policy / Terms pages.


